<Zero title="1"></Zero>

<view class="custom-navbar">
  <view class="navbar-bg"></view>
  <view class="navbar-content">
    <text class="navbar-title">æ ¡å›­è®ºå›</text>
  </view>
</view>

<view class="forum-container">
  <!-- æ¬¢è¿æ¨ªå¹… -->
  <view class="welcome-banner">
    <view class="banner-bg">
      <view class="banner-gradient"></view>
      <view class="banner-pattern"></view>
    </view>
    <view class="banner-content">
      <view class="welcome-text">
        <text class="greeting">ğŸ’¬ æ ¡å›­è®ºå›</text>
        <text class="subtitle">åˆ†äº«æƒ³æ³•ï¼Œäº¤æµå¿ƒå¾—</text>
      </view>
      <view class="forum-stats">
        <text class="stats-number">{{postList.length}}</text>
        <text class="stats-label">æ´»è·ƒå¸–å­</text>
      </view>
    </view>
  </view>

  <!-- æ™ºèƒ½åˆ†ç±» -->
  <view class="smart-categories">
    <view class="category-item {{currentTab === 'all' ? 'active' : ''}}" bindtap="switchTab" data-tab="all">
      <image src="/images/å…¨éƒ¨.png" class="category-icon"></image>
      <text class="category-text">å…¨éƒ¨</text>
    </view>
    <view class="category-item {{currentTab === 'hot' ? 'active' : ''}}" bindtap="switchTab" data-tab="hot">
      <image src="/images/çƒ­é—¨.png" class="category-icon"></image>
      <text class="category-text">çƒ­é—¨</text>
    </view>
    <view class="category-item {{currentTab === 'essence' ? 'active' : ''}}" bindtap="switchTab" data-tab="essence">
      <image src="/images/ç²¾å.png" class="category-icon"></image>
      <text class="category-text">ç²¾å</text>
    </view>
    <view class="category-item {{currentTab === 'mine' ? 'active' : ''}}" bindtap="switchTab" data-tab="mine">
      <image src="/images/ä¸ªäºº.png" class="category-icon"></image>
      <text class="category-text">æˆ‘çš„</text>
    </view>
  </view>

  <!-- å¸–å­åˆ—è¡¨ -->
  <view class="posts-section">
    <view class="posts-list">
      <view class="post-card" wx:for="{{postList}}" wx:key="id" bindtap="viewDetail" data-item="{{item}}">
        <view class="post-header">
          <view class="user-section">
            <view class="user-avatar">
              <image src="{{item.avatar}}" class="avatar-img"></image>
              <view class="online-indicator"></view>
            </view>
            <view class="user-info">
              <text class="username">{{item.username}}</text>
              <text class="post-time">{{item.time}}</text>
            </view>
          </view>
          <view class="post-badge" wx:if="{{item.tag}}">
            <text class="badge-text">{{item.tag}}</text>
          </view>
        </view>
        
        <view class="post-content">
          <text class="post-title">{{item.title}}</text>
          <text class="post-desc">{{item.content}}</text>
          <view class="post-images" wx:if="{{item.images && item.images.length}}">
            <image wx:for="{{item.images}}" wx:key="index" src="{{img}}" class="content-img"></image>
          </view>
        </view>
        
        <view class="post-actions">
          <view class="action-item" catchtap="likePost" data-id="{{item.id}}">
            <text class="action-icon">ğŸ‘</text>
            <text class="action-count">{{item.likes || 0}}</text>
          </view>
          <view class="action-item" catchtap="collectPost" data-id="{{item.id}}">
            <text class="action-icon">â­</text>
            <text class="action-count">{{item.collects || 0}}</text>
          </view>
          <view class="action-item" catchtap="commentPost" data-id="{{item.id}}">
            <text class="action-icon">ğŸ’¬</text>
            <text class="action-count">{{item.comments || 0}}</text>
          </view>
          <view class="action-item" catchtap="sharePost" data-id="{{item.id}}">
            <text class="action-icon">ğŸ“¤</text>
            <text class="action-count">åˆ†äº«</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more-section" wx:if="{{hasMore}}">
      <button class="load-more-btn" bindtap="loadMore" loading="{{loading}}">
        <text class="load-text">{{loading ? 'åŠ è½½ä¸­...' : 'åŠ è½½æ›´å¤š'}}</text>
        <text class="load-icon">â†“</text>
      </button>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{postList.length === 0 && !loading}}">
      <view class="empty-content">
        <text class="empty-icon">ğŸ’­</text>
        <text class="empty-title">æš‚æ— å¸–å­</text>
        <text class="empty-desc">å¿«æ¥å‘å¸ƒç¬¬ä¸€ä¸ªå¸–å­ï¼Œåˆ†äº«ä½ çš„æƒ³æ³•å§</text>
        <button class="empty-action" bindtap="goToPost">ç«‹å³å‘å¸–</button>
      </view>
    </view>
  </view>
</view>

<!-- æ‚¬æµ®å‘å¸–æŒ‰é’® -->
<view class="fab-container">
  <button class="fab-button" bindtap="goToPost">
    <text class="fab-icon">âœï¸</text>
    <text class="fab-text">å‘å¸–</text>
  </button>
</view>
