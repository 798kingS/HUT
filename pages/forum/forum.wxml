<view class="custom-navbar">
  <view class="navbar-bg"></view>
  <view class="navbar-content">
    <image src="/images/app-logo.png" class="navbar-logo"></image>
    <text class="navbar-title">æ¹–é™¢é€š</text>
    <image src="/images/navbar-action.png" class="navbar-action"></image>
  </view>
</view>
<view class="forum-bg">
  <!-- é¡¶éƒ¨åœ†è§’Tabæ  -->
  <view class="tab-bar">
    <view class="tab-item {{currentTab === 0 ? 'active' : ''}}" bindtap="switchTab" data-index="0">
      <text class="tab-icon">ğŸš—</text>
      <text class="tab-text">æ‹¼è½¦</text>
    </view>
    <view class="tab-item {{currentTab === 1 ? 'active' : ''}}" bindtap="switchTab" data-index="1">
      <text class="tab-icon">ğŸ“š</text>
      <text class="tab-text">å–ä¹¦</text>
    </view>
    <view class="tab-item {{currentTab === 2 ? 'active' : ''}}" bindtap="switchTab" data-index="2">
      <text class="tab-icon">ğŸ’¬</text>
      <text class="tab-text">è®ºå›</text>
    </view>
  </view>

  <view class="content">
    <!-- æ‹¼è½¦æ¨¡å— -->
    <view class="tab-content" wx:if="{{currentTab === 0}}">
      <view class="action-bar">
        <button class="btn btn-primary" bindtap="navigateToCarpoolPublish">+ å‘å¸ƒæ‹¼è½¦</button>
        <button class="btn btn-secondary" bindtap="navigateToCarpoolList">å…¨éƒ¨æ‹¼è½¦</button>
      </view>
      <view class="featured-list">
        <view class="list-header">
          <text class="list-title">çƒ­é—¨æ‹¼è½¦</text>
        </view>
        <view class="forum-card" wx:for="{{carpoolList}}" wx:key="id" bindtap="viewCarpoolDetail" data-item="{{item}}">
          <view class="card-header">
            <image src="{{item.avatar}}" class="avatar"></image>
            <view class="user-info">
              <text class="username">{{item.username}}</text>
              <text class="time">{{item.time}}</text>
            </view>
            <view class="price">Â¥{{item.price}}</view>
          </view>
          <view class="card-body">
            <text class="route">{{item.departure}} â†’ {{item.destination}}</text>
            <text class="car-info">{{item.carType}} | å‰©ä½™{{item.availableSeats}}åº§</text>
            <text class="depart-time">å‡ºå‘ï¼š{{item.departureTime}}</text>
          </view>
          <view class="card-footer">
            <button class="btn-icon" catchtap="likeCarpool" data-id="{{item.id}}"><text class="icon">ğŸ‘</text> {{item.likes}}</button>
            <button class="btn-icon" catchtap="collectCarpool" data-id="{{item.id}}"><text class="icon">â­</text> {{item.collects}}</button>
            <button class="btn-icon" catchtap="shareCarpool" data-item="{{item}}"><text class="icon">ğŸ“¤</text> åˆ†äº«</button>
          </view>
        </view>
      </view>
    </view>

    <!-- å–ä¹¦æ¨¡å— -->
    <view class="tab-content" wx:if="{{currentTab === 1}}">
      <view class="action-bar">
        <button class="btn btn-primary" bindtap="navigateToBooksPublish">+ å‘å¸ƒå–ä¹¦</button>
        <button class="btn btn-secondary" bindtap="navigateToBooksList">å…¨éƒ¨ä¹¦ç±</button>
      </view>
      <view class="featured-list">
        <view class="list-header">
          <text class="list-title">çƒ­é—¨ä¹¦ç±</text>
        </view>
        <view class="forum-card" wx:for="{{booksList}}" wx:key="id" bindtap="viewBookDetail" data-item="{{item}}">
          <view class="card-header">
            <image src="{{item.image}}" class="book-cover"></image>
            <view class="book-info">
              <text class="book-title">{{item.title}}</text>
              <text class="book-author">ä½œè€…ï¼š{{item.author}}</text>
              <text class="book-publisher">å‡ºç‰ˆç¤¾ï¼š{{item.publisher}}</text>
              <text class="book-isbn">ISBNï¼š{{item.isbn}}</text>
            </view>
            <view class="book-price">
              <text class="price">Â¥{{item.price}}</text>
              <text class="original-price">Â¥{{item.originalPrice}}</text>
            </view>
          </view>
          <view class="card-footer">
            <button class="btn-icon" catchtap="collectBook" data-id="{{item.id}}"><text class="icon">â­</text></button>
            <button class="btn-icon" catchtap="shareBook" data-item="{{item}}"><text class="icon">ğŸ“¤</text> åˆ†äº«</button>
          </view>
        </view>
      </view>
    </view>

    <!-- è®ºå›æ¨¡å— -->
    <view class="tab-content" wx:if="{{currentTab === 2}}">
      <view class="action-bar">
        <button class="btn btn-primary" bindtap="navigateToForumPublish">+ å‘å¸ƒå¸–å­</button>
        <button class="btn btn-secondary" bindtap="navigateToForumList">å…¨éƒ¨å¸–å­</button>
      </view>
      <view class="featured-list">
        <view class="list-header">
          <text class="list-title">çƒ­é—¨è®¨è®º</text>
        </view>
        <view class="forum-card" wx:for="{{forumList}}" wx:key="id" bindtap="viewForumDetail" data-item="{{item}}">
          <view class="card-header">
            <image src="{{item.avatar}}" class="avatar"></image>
            <view class="user-info">
              <text class="username">{{item.username}}</text>
              <text class="time">{{item.time}}</text>
            </view>
          </view>
          <view class="card-body">
            <text class="post-title">{{item.title}}</text>
            <text class="post-content">{{item.content}}</text>
            <view class="post-images" wx:if="{{item.images.length > 0}}">
              <image wx:for="{{item.images}}" wx:key="*this" wx:for-item="img" src="{{img}}" mode="aspectFill" class="post-image"></image>
            </view>
          </view>
          <view class="card-footer">
            <button class="btn-icon" catchtap="likePost" data-id="{{item.id}}"><text class="icon">ğŸ‘</text> {{item.likes}}</button>
            <button class="btn-icon" catchtap="commentPost" data-id="{{item.id}}"><text class="icon">ğŸ’¬</text> {{item.comments}}</button>
            <button class="btn-icon" catchtap="collectPost" data-id="{{item.id}}"><text class="icon">â­</text> {{item.collects}}</button>
            <button class="btn-icon" catchtap="sharePost" data-item="{{item}}"><text class="icon">ğŸ“¤</text> åˆ†äº«</button>
          </view>
        </view>
      </view>
    </view>
  </view>
</view> 