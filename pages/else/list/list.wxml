<Header title="é—²ç½®ç‰©å“"></Header>

<view class="items-container">
  <!-- æ¬¢è¿æ¨ªå¹… -->
  <view class="welcome-banner">
    <view class="banner-bg">
      <view class="banner-gradient"></view>
      <view class="banner-pattern"></view>
    </view>
    <view class="banner-content">
      <view class="welcome-text">
        <text class="greeting">ğŸ›ï¸ é—²ç½®ç‰©å“</text>
        <text class="subtitle">è®©æ—§ç‰©æ‰¾åˆ°æ–°å®¶</text>
      </view>
      <view class="items-stats">
        <text class="stats-number">{{itemsList.length}}</text>
        <text class="stats-label">å¯ç”¨ç‰©å“</text>
      </view>
    </view>
  </view>

  <!-- æ™ºèƒ½æœç´¢ -->
  <view class="smart-search">
    <view class="search-wrapper">
      <view class="search-input {{searchFocus ? 'focus' : ''}}">
        <image src="/images/æœç´¢.png" class="search-icon"></image>
        <input class="input-field" placeholder="æœç´¢ç‰©å“åç§°æˆ–ç±»åˆ«" value="{{searchKeyword}}" bindinput="onSearchInput" focus="{{searchFocus}}" bindfocus="onSearchFocus" bindblur="onSearchBlur" />
      </view>
      <button class="search-btn" bindtap="search">
        <text class="search-text">æœç´¢</text>
      </button>
    </view>
  </view>

  <!-- åˆ†ç±»ç­›é€‰ -->
  <view class="category-filters">
    <view class="filter-item {{currentFilter === 'all' ? 'active' : ''}}" bindtap="setFilter" data-filter="all">
      <image src="/images/å…¨éƒ¨.png" class="filter-icon"></image>
      <text class="filter-text">å…¨éƒ¨</text>
    </view>
    <view class="filter-item {{currentFilter === 'electronics' ? 'active' : ''}}" bindtap="setFilter" data-filter="electronics">
      <image src="/images/å…¶ä»–.png" class="filter-icon"></image>
      <text class="filter-text">ç”µå­äº§å“</text>
    </view>
    <view class="filter-item {{currentFilter === 'clothing' ? 'active' : ''}}" bindtap="setFilter" data-filter="clothing">
      <image src="/images/å…¶ä»–.png" class="filter-icon"></image>
      <text class="filter-text">æœè£…</text>
    </view>
    <view class="filter-item {{currentFilter === 'other' ? 'active' : ''}}" bindtap="setFilter" data-filter="other">
      <image src="/images/å…¶ä»–.png" class="filter-icon"></image>
      <text class="filter-text">å…¶ä»–</text>
    </view>
  </view>

  <!-- ç‰©å“åˆ—è¡¨ -->
  <view class="items-section">
    <view class="items-list">
      <view class="item-card" wx:for="{{itemsList}}" wx:key="id" bindtap="viewDetail" data-item="{{item}}">
        <view class="card-header">
          <view class="item-cover-section">
            <image src="{{item.images}}" class="item-cover"></image>
            <view class="item-status">
              <text class="status-text">{{item.condition}}</text>
            </view>
          </view>
          <view class="item-info">
            <text class="item-title">{{item.title}}</text>
            <text class="item-category">{{item.category}}</text>
            <view class="item-tags">
              <text class="tag-item">{{item.category}}</text>
            </view>
          </view>
          <view class="price-section">
            <text class="price-symbol">Â¥</text>
            <text class="price-amount">{{item.price}}</text>
          </view>
        </view>
        
        <view class="item-description">
          <text class="desc-text">{{item.description}}</text>
        </view>
        
        <view class="seller-section">
          <view class="seller-info">
            <view class="seller-avatar">
              <image src="{{item.sellerAvatar}}" class="avatar-img"></image>
              <view class="online-indicator"></view>
            </view>
            <view class="seller-details">
              <text class="seller-name">{{item.sellerName}}</text>
              <text class="publish-time">{{item.publishTime}}</text>
            </view>
          </view>
          <view class="item-actions">
            <view class="action-btn" catchtap="likeItem" data-id="{{item.id}}">
              <text class="action-icon">ğŸ‘</text>
              <text class="action-count">{{item.likes || 0}}</text>
            </view>
            <view class="action-btn" catchtap="collectItem" data-id="{{item.id}}">
              <text class="action-icon">â­</text>
              <text class="action-count">{{item.collects || 0}}</text>
            </view>
            <view class="action-btn" catchtap="contactSeller" data-item="{{item}}">
              <text class="action-icon">ğŸ’¬</text>
              <text class="action-text">è”ç³»</text>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more-section" wx:if="{{hasMore}}">
      <button class="load-more-btn" bindtap="loadMore" loading="{{loading}}">
        <text class="load-text">{{loading ? 'åŠ è½½ä¸­...' : 'åŠ è½½æ›´å¤š'}}</text>
        <text class="load-icon">â†“</text>
      </button>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{itemsList.length === 0 && !loading}}">
      <view class="empty-content">
        <text class="empty-icon">ğŸ›ï¸</text>
        <text class="empty-title">æš‚æ— é—²ç½®ç‰©å“ä¿¡æ¯</text>
        <text class="empty-desc">å¿«æ¥å‘å¸ƒç¬¬ä¸€ä¸ªé—²ç½®ç‰©å“ï¼Œè®©æ—§ç‰©æ‰¾åˆ°æ–°å®¶</text>
        <button class="empty-action" bindtap="goToPublish">ç«‹å³å‘å¸ƒ</button>
      </view>
    </view>
  </view>
</view>

<!-- æ‚¬æµ®å‘å¸ƒæŒ‰é’® -->
<view class="fab-container">
  <button class="fab-button" bindtap="goToPublish">
    <text class="fab-icon">ğŸ›ï¸</text>
    <text class="fab-text">å‘å¸ƒ</text>
  </button>
</view> 