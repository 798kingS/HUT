<!--pages/else/sale/sale.wxml-->
<Header title="å•†å“è¯¦æƒ…"></Header>
<view class="sale-container" wx:if="{{item}}">
  <!-- å•†å“å›¾ç‰‡è½®æ’­ -->
  <view class="image-section">
    <swiper class="image-swiper" indicator-dots="{{images.length > 1}}" autoplay="{{false}}" circular="{{true}}">
      <swiper-item wx:for="{{images}}" wx:key="*this">
        <image src="{{item}}" mode="aspectFill" class="product-image"></image>
      </swiper-item>
    </swiper>
    <view class="image-indicators" wx:if="{{images.length > 1}}">
      <view class="indicator {{currentImageIndex === index ? 'active' : ''}}" 
            wx:for="{{images}}" wx:key="*this" 
            bindtap="switchImage" data-index="{{index}}"></view>
    </view>
  </view>

  <!-- å•†å“åŸºæœ¬ä¿¡æ¯ -->
  <view class="info-section">
    <view class="price-row">
      <text class="current-price">Â¥{{item.price}}</text>
      <text class="original-price" wx:if="{{item.originalPrice}}">Â¥{{item.originalPrice}}</text>
    </view>
    <view class="title-row">
      <text class="product-title">{{item.title}}</text>
    </view>
    <view class="meta-row">
      <text class="condition">æˆè‰²ï¼š{{item.condition}}</text>
      <text class="category">{{item.category}}</text>
    </view>
    <view class="stats-row">
      <text class="publish-time">{{item.publishTime}}</text>
      <text class="location">ğŸ“ {{item.location}}</text>
    </view>
  </view>

  <!-- å•†å“æè¿° -->
  <view class="description-section">
    <view class="section-title">å•†å“æè¿°</view>
    <text class="description-text">{{item.description}}</text>
  </view>

  <!-- å–å®¶ä¿¡æ¯ -->
  <view class="seller-section">
    <view class="section-title">å–å®¶ä¿¡æ¯</view>
    <view class="seller-info">
      <image src="{{item.sellerAvatar}}" class="seller-avatar"></image>
      <view class="seller-details">
        <text class="seller-name">{{item.sellerName}}</text>
        <text class="seller-stats">å‘å¸ƒ {{item.publishTime}}</text>
      </view>
      <button class="contact-btn" bindtap="contactSeller">è”ç³»å–å®¶</button>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-section">
    <view class="action-buttons">
      <button class="action-btn like-btn {{isLiked ? 'liked' : ''}}" bindtap="likeItem">
        <text class="btn-icon">{{isLiked ? 'â¤ï¸' : 'ğŸ¤'}}</text>
        <text class="btn-text">{{item.likes}}</text>
      </button>
      <button class="action-btn collect-btn {{isCollected ? 'collected' : ''}}" bindtap="collectItem">
        <text class="btn-icon">{{isCollected ? 'â­' : 'â˜†'}}</text>
        <text class="btn-text">{{item.collects}}</text>
      </button>
      <button class="purchase-btn" bindtap="purchaseItem">ç«‹å³è´­ä¹°</button>
    </view>
  </view>
</view>

<!-- åŠ è½½çŠ¶æ€ -->
<view class="loading-container" wx:else>
  <text class="loading-text">åŠ è½½ä¸­...</text>
</view>